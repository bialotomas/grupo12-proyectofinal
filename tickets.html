<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CulturalHub - Tickets</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#faf5ff',
                            500: '#a855f7',
                            600: '#9333ea',
                            700: '#7c3aed'
                        },
                        secondary: {
                            500: '#ec4899',
                            600: '#db2777'
                        }
                    }
                }
            }
        }
    </script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-white/95 backdrop-blur-sm border-b sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-2">
                    <a href="index.html" class="flex items-center space-x-2">
                        <span class="text-xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent">
                            CulturalHub
                        </span>
                    </a>
                </div>
                <div class="hidden md:flex items-center space-x-8">
                    <a href="index.html" class="text-gray-700 hover:text-purple-600 transition-colors">Inicio</a>
                    <a href="sobre-nosotros.html" class="text-gray-700 hover:text-purple-600 transition-colors">Sobre Nosotros</a>
                    <a href="eventos.html" class="text-gray-700 hover:text-purple-600 transition-colors">Eventos</a>
                    <a href="talleres.html" class="text-gray-700 hover:text-purple-600 transition-colors">Talleres</a>
                    <a href="galeria.html" class="text-gray-700 hover:text-purple-600 transition-colors">Galería</a>
                    <a href="eventos.html" class="text-purple-600">Tickets</a>
                </div>
                <!-- Mobile menu button -->
                <button class="md:hidden" onclick="toggleMobileMenu()">
                    <i class="fas fa-bars text-gray-700"></i>
                </button>
            </div>
        </div>
        <!-- Mobile menu -->
        <div id="mobile-menu" class="hidden md:hidden bg-white border-t">
            <div class="px-4 py-2 space-y-2">
                <a href="index.html" class="block py-2 text-gray-700">Inicio</a>
                <a href="sobre-nosotros.html" class="block py-2 text-gray-700">Sobre Nosotros</a>
                <a href="eventos.html" class="block py-2 text-gray-700">Eventos</a>
                <a href="talleres.html" class="block py-2 text-gray-700">Talleres</a>
                <a href="galeria.html" class="block py-2 text-gray-700">Galería</a>
                <a href="eventos.html" class="block py-2 text-purple-600">Tickets</a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main>
        <!-- Header -->
        <section class="bg-gradient-to-r from-purple-600 to-pink-600 text-white py-16">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center">
                    <h1 class="text-4xl md:text-5xl font-bold mb-4">Compra de Tickets</h1>
                    <p class="text-xl text-purple-100 max-w-3xl mx-auto">
                        Asegura tu lugar en nuestros eventos culturales
                    </p>
                </div>
            </div>
        </section>

        <!-- Ticket Selection -->
        <section class="py-12">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div id="event-details" class="mb-8">
                    <div class="bg-white rounded-xl shadow-sm p-6">
                        <h2 id="event-name" class="text-2xl font-bold text-gray-900 mb-2">Evento CulturalHub</h2>
                        <p id="event-date" class="text-gray-600">
                            <i class="fas fa-calendar mr-2"></i>
                            Fecha por confirmar
                        </p>
                    </div>
                </div>

                <div class="grid md:grid-cols-2 gap-8">
                    <!-- Ticket Options -->
                    <div class="bg-white rounded-xl shadow-sm p-6">
                        <h2 class="text-2xl font-bold text-gray-900 mb-6">Selecciona tus Tickets</h2>
                        
                        <div class="space-y-6">
                            <!-- Regular Ticket -->
                            <div class="border border-gray-200 rounded-lg p-4">
                                <div class="flex justify-between items-start mb-4">
                                    <div>
                                        <h3 class="text-lg font-semibold">Ticket Regular</h3>
                                        <p class="text-sm text-gray-600">Acceso general al evento</p>
                                    </div>
                                    <div class="text-right">
                                        <div class="text-2xl font-bold text-purple-600" id="regular-price">$0</div>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-4">
                                    <button onclick="decrementTicket('regular')" class="w-8 h-8 rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-50">
                                        <i class="fas fa-minus text-gray-600"></i>
                                    </button>
                                    <span id="regular-count" class="text-lg font-medium">0</span>
                                    <button onclick="incrementTicket('regular')" class="w-8 h-8 rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-50">
                                        <i class="fas fa-plus text-gray-600"></i>
                                    </button>
                                </div>
                            </div>

                            <!-- Student Ticket -->
                            <div class="border border-gray-200 rounded-lg p-4">
                                <div class="flex justify-between items-start mb-4">
                                    <div>
                                        <h3 class="text-lg font-semibold">Ticket Estudiante</h3>
                                        <p class="text-sm text-gray-600">20% de descuento con credencial vigente</p>
                                    </div>
                                    <div class="text-right">
                                        <div class="text-2xl font-bold text-purple-600" id="student-price">$0</div>
                                        <div class="text-sm text-gray-500 line-through">$0</div>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-4">
                                    <button onclick="decrementTicket('student')" class="w-8 h-8 rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-50">
                                        <i class="fas fa-minus text-gray-600"></i>
                                    </button>
                                    <span id="student-count" class="text-lg font-medium">0</span>
                                    <button onclick="incrementTicket('student')" class="w-8 h-8 rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-50">
                                        <i class="fas fa-plus text-gray-600"></i>
                                    </button>
                                </div>
                            </div>

                            <!-- Couple Ticket -->
                            <div class="border border-gray-200 rounded-lg p-4">
                                <div class="flex justify-between items-start mb-4">
                                    <div>
                                        <h3 class="text-lg font-semibold">Ticket Pareja</h3>
                                        <p class="text-sm text-gray-600">15% de descuento para dos personas</p>
                                    </div>
                                    <div class="text-right">
                                        <div class="text-2xl font-bold text-purple-600" id="couple-price">$0</div>
                                        <div class="text-sm text-gray-500 line-through">$0</div>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-4">
                                    <button onclick="decrementTicket('couple')" class="w-8 h-8 rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-50">
                                        <i class="fas fa-minus text-gray-600"></i>
                                    </button>
                                    <span id="couple-count" class="text-lg font-medium">0</span>
                                    <button onclick="incrementTicket('couple')" class="w-8 h-8 rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-50">
                                        <i class="fas fa-plus text-gray-600"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Total -->
                        <div class="mt-8 pt-6 border-t">
                            <div class="flex justify-between items-center">
                                <span class="text-lg font-semibold">Total</span>
                                <div class="text-right">
                                    <div id="total-amount" class="text-2xl font-bold text-purple-600">$0</div>
                                    <div id="total-savings" class="text-sm text-gray-500"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Payment Form -->
                    <div class="bg-white rounded-xl shadow-sm p-6">
                        <h2 class="text-2xl font-bold text-gray-900 mb-6">Información de Pago</h2>
                        
                        <form id="payment-form" onsubmit="handlePayment(event)" class="space-y-6">
                            <!-- Personal Information -->
                            <div class="space-y-4">
                                <div>
                                    <label for="name" class="block text-sm font-medium text-gray-700 mb-1">Nombre Completo</label>
                                    <input type="text" id="name" name="name" required
                                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                </div>
                                <div>
                                    <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Correo Electrónico</label>
                                    <input type="email" id="email" name="email" required
                                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                </div>
                            </div>

                            <!-- Payment Method -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-3">Método de Pago</label>
                                <div class="space-y-3">
                                    <label class="flex items-center space-x-3 p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50">
                                        <input type="radio" name="payment" value="credit" class="text-purple-600 focus:ring-purple-500" checked>
                                        <span>Tarjeta de Crédito/Débito</span>
                                    </label>
                                    <label class="flex items-center space-x-3 p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50">
                                        <input type="radio" name="payment" value="transfer" class="text-purple-600 focus:ring-purple-500">
                                        <span>Transferencia Bancaria</span>
                                    </label>
                                </div>
                            </div>

                            <!-- Credit Card Details (shown/hidden based on payment method) -->
                            <div id="credit-card-details" class="space-y-4">
                                <div>
                                    <label for="card-number" class="block text-sm font-medium text-gray-700 mb-1">Número de Tarjeta</label>
                                    <input type="text" id="card-number" name="card-number" placeholder="1234 5678 9012 3456"
                                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                </div>
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label for="expiry" class="block text-sm font-medium text-gray-700 mb-1">Fecha de Expiración</label>
                                        <input type="text" id="expiry" name="expiry" placeholder="MM/AA"
                                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                    </div>
                                    <div>
                                        <label for="cvv" class="block text-sm font-medium text-gray-700 mb-1">CVV</label>
                                        <input type="text" id="cvv" name="cvv" placeholder="123"
                                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                    </div>
                                </div>
                            </div>

                            <button type="submit" 
                                class="w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 px-4 rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all">
                                Comprar Tickets
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid md:grid-cols-4 gap-8">
                <div>
                    <div class="mb-4">
                        <span class="text-xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent">
                            CulturalHub
                        </span>
                    </div>
                    <p class="text-gray-400">El centro cultural más vibrante para jóvenes creativos</p>
                </div>
                <div>
                    <h3 class="font-semibold mb-4">Navegación</h3>
                    <ul class="space-y-2 text-gray-400">
                        <li><a href="eventos.html" class="hover:text-white transition-colors">Eventos</a></li>
                        <li><a href="talleres.html" class="hover:text-white transition-colors">Talleres</a></li>
                        <li><a href="galeria.html" class="hover:text-white transition-colors">Galería</a></li>
                        <li><a href="tickets.html" class="hover:text-white transition-colors">Tickets</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="font-semibold mb-4">Información</h3>
                    <ul class="space-y-2 text-gray-400">
                        <li><a href="sobre-nosotros.html" class="hover:text-white transition-colors">Sobre Nosotros</a></li>
                        <li><a href="contacto.html" class="hover:text-white transition-colors">Contacto</a></li>
                        <li><a href="contacto.html#faq" class="hover:text-white transition-colors">FAQ</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="font-semibold mb-4">Contacto</h3>
                    <div class="space-y-2 text-gray-400">
                        <p>Av. Cultura 123</p>
                        <p>Centro Histórico, CDMX</p>
                        <p>Tel: (55) 1234-5678</p>
                        <p>info@culturalhub.mx</p>
                    </div>
                </div>
            </div>
            <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
                <p>&copy; 2024 CulturalHub. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

    <script>
        // Get URL parameters
        const urlParams = new URLSearchParams(window.location.search);
        const eventName = urlParams.get('event') || 'Evento CulturalHub';
        const eventDate = urlParams.get('date') || 'Fecha por confirmar';
        const eventPrice = urlParams.get('price') || '15';

        // Update event details
        document.getElementById('event-name').textContent = eventName;
        document.getElementById('event-date').innerHTML = `<i class="fas fa-calendar mr-2"></i>${eventDate}`;

        // Update ticket prices
        const regularPrice = parseInt(eventPrice);
        const studentPrice = Math.floor(regularPrice * 0.8); // 20% discount
        const couplePrice = Math.floor(regularPrice * 1.8); // 2 tickets with 10% discount

        document.getElementById('regular-price').textContent = `$${regularPrice}`;
        document.getElementById('student-price').textContent = `$${studentPrice}`;
        document.getElementById('couple-price').textContent = `$${couplePrice}`;

        // Initialize ticket counts
        const ticketCounts = {
            regular: 0,
            student: 0,
            couple: 0
        };

        // Credit Card Validation Functions
        function formatCardNumber(input) {
            let value = input.value.replace(/\D/g, '');
            if (value.length > 16) {
                value = value.slice(0, 16);
            }
            let formattedValue = '';
            for (let i = 0; i < value.length; i++) {
                if (i > 0 && i % 4 === 0) {
                    formattedValue += ' ';
                }
                formattedValue += value[i];
            }
            input.value = formattedValue;
        }

        function formatExpiryDate(input) {
            let value = input.value.replace(/\D/g, '');
            if (value.length > 4) {
                value = value.slice(0, 4);
            }
            if (value.length >= 2) {
                const month = parseInt(value.slice(0, 2));
                if (month > 12) {
                    value = '12' + value.slice(2);
                }
                value = value.slice(0, 2) + '/' + value.slice(2);
            }
            input.value = value;
        }

        function formatCVV(input) {
            let value = input.value.replace(/\D/g, '');
            if (value.length > 4) {
                value = value.slice(0, 4);
            }
            input.value = value;
        }

        // Add input event listeners for credit card fields
        document.getElementById('card-number').addEventListener('input', function() {
            formatCardNumber(this);
        });

        document.getElementById('expiry').addEventListener('input', function() {
            formatExpiryDate(this);
        });

        document.getElementById('cvv').addEventListener('input', function() {
            formatCVV(this);
        });

        // Update total calculation
        function updateTotal() {
            const regularCount = ticketCounts.regular;
            const studentCount = ticketCounts.student;
            const coupleCount = ticketCounts.couple;

            const total = (regularCount * regularPrice) + 
                         (studentCount * studentPrice) + 
                         (coupleCount * couplePrice);

            document.getElementById('total-amount').textContent = `$${total}`;
        }

        function incrementTicket(type) {
            ticketCounts[type]++;
            updateTicketCount(type);
            updateTotal();
        }

        function decrementTicket(type) {
            if (ticketCounts[type] > 0) {
                ticketCounts[type]--;
                updateTicketCount(type);
                updateTotal();
            }
        }

        function updateTicketCount(type) {
            document.getElementById(`${type}-count`).textContent = ticketCounts[type];
        }

        // Handle form submission
        document.getElementById('payment-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Validate total tickets
            const totalTickets = Object.values(ticketCounts).reduce((a, b) => a + b, 0);
            if (totalTickets === 0) {
                alert('Por favor, selecciona al menos un ticket.');
                return;
            }

            // Validate credit card details if credit card payment is selected
            const paymentMethod = document.querySelector('input[name="payment"]:checked').value;
            if (paymentMethod === 'credit') {
                const cardNumber = document.getElementById('card-number').value.replace(/\s/g, '');
                const expiry = document.getElementById('expiry').value;
                const cvv = document.getElementById('cvv').value;

                if (cardNumber.length !== 16) {
                    alert('Por favor, ingresa un número de tarjeta válido (16 dígitos).');
                    return;
                }

                if (!expiry.match(/^\d{2}\/\d{2}$/)) {
                    alert('Por favor, ingresa una fecha de expiración válida (MM/AA).');
                    return;
                }

                if (cvv.length < 3 || cvv.length > 4) {
                    alert('Por favor, ingresa un código de seguridad válido (3 o 4 dígitos).');
                    return;
                }

                // Validate expiry date is not in the past
                const [month, year] = expiry.split('/');
                const currentDate = new Date();
                const currentYear = currentDate.getFullYear() % 100;
                const currentMonth = currentDate.getMonth() + 1;

                if (parseInt(year) < currentYear || 
                    (parseInt(year) === currentYear && parseInt(month) < currentMonth)) {
                    alert('La fecha de expiración no puede ser en el pasado.');
                    return;
                }
            }

            // Simulate payment processing
            const submitButton = e.target.querySelector('button[type="submit"]');
            submitButton.disabled = true;
            submitButton.textContent = 'Procesando...';

            setTimeout(() => {
                // Calculate total
                const total = (ticketCounts.regular * regularPrice) + 
                            (ticketCounts.student * studentPrice) + 
                            (ticketCounts.couple * couplePrice);

                // Prepare URL parameters
                const params = new URLSearchParams({
                    event: eventName,
                    date: eventDate,
                    total: total,
                    tickets: encodeURIComponent(JSON.stringify(ticketCounts))
                });

                // Redirect to success page
                window.location.href = `success.html?${params.toString()}`;
            }, 2000);
        });

        function toggleMobileMenu() {
            const mobileMenu = document.getElementById('mobile-menu');
            mobileMenu.classList.toggle('hidden');
        }

        // Set up payment method toggle
        const paymentInputs = document.querySelectorAll('input[name="payment"]');
        const creditCardDetails = document.getElementById('credit-card-details');

        paymentInputs.forEach(input => {
            input.addEventListener('change', function() {
                creditCardDetails.style.display = this.value === 'credit' ? 'block' : 'none';
            });
        });
    </script>
</body>
</html> 